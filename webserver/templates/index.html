<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DS Beamforming Control</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <header>
        <h1>DS Beamforming Control</h1>
        <div id="connection-status" class="status-offline">Desconectado</div>
    </header>

    <main>
        <!-- Selector de dispositivo -->
        <section class="card">
            <h2>Dispositivo</h2>
            <select id="device-selector">
                <option value="">Seleccionar dispositivo...</option>
            </select>

            <!-- Configurar IP del ESP32 -->
            <div id="ip-config" style="display: none; margin-top: 1rem;">
                <div class="control-row">
                    <label>IP del ESP32</label>
                    <input type="text" id="esp32-ip" placeholder="192.168.1.231" style="width: 150px;">
                    <button id="save-ip-btn" class="btn-secondary">Guardar IP</button>
                    <button id="ping-btn" class="btn-secondary">Ping</button>
                </div>
            </div>

            <div id="device-status" class="device-status"></div>
        </section>

        <!-- Controles principales -->
        <section class="card" id="main-controls" style="display: none;">
            <h2>Controles Principales</h2>

            <div class="control-row">
                <label>Master Gain</label>
                <input type="range" id="master-gain" min="0" max="1" step="0.01" value="0.8">
                <span id="master-gain-value">0.80</span>
            </div>

            <div class="control-row">
                <label>Distancia Focal (m)</label>
                <input type="number" id="focal-distance" min="0.5" max="50" step="0.1" value="3.0">
            </div>

            <div class="control-row">
                <label>Mute Global</label>
                <button id="mute-btn" class="btn-mute">MUTE</button>
            </div>

            <div class="control-row">
                <button id="send-config-btn" class="btn-primary">Enviar a Dispositivo</button>
            </div>
        </section>

        <!-- Grid de canales -->
        <section class="card" id="channels-section" style="display: none;">
            <h2>Canales (16)</h2>
            <div class="channels-header">
                <span>CH</span>
                <span>Delay (ms)</span>
                <span>Gain</span>
                <span>Mute</span>
            </div>
            <div id="channels-grid"></div>
        </section>

        <!-- Presets -->
        <section class="card" id="presets-section">
            <h2>Presets</h2>
            <div class="preset-controls">
                <input type="text" id="preset-name" placeholder="Nombre del preset">
                <button id="save-preset-btn" class="btn-secondary">Guardar</button>
            </div>
            <div id="presets-list"></div>
        </section>

        <!-- Log -->
        <section class="card">
            <h2>Log</h2>
            <div id="log" class="log-container"></div>
        </section>
    </main>

    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="/static/js/main.js"></script>
</body>
</html>
